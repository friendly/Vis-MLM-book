---
title: "Test use of rgl in PDF & HTML"
format:
  html:
    toc: false
  pdf:
    toc: false
---

```{r}
#| label: setup
#| include: false
library(rgl)
options(rgl.useNULL = TRUE) # Suppress the separate rgl window during knitting
```


    
::: {.content-visible when-format="pdf"}

PDF: Will this generate a static plot in @fig-rgl-test-pdf?

```{r}
#| label: fig-rgl-test-pdf
#| dev: pdf
#| fig-width: 8
#| fig-height: 8
#| fig-cap: "Random points in 3D"
x <- rnorm(100)
y <- rnorm(100)
z <- rnorm(100)
plot3d(x, y, z, col = "red", type = "s", size = 3)
outfile <- here::here("images", "rgl-test.png")
fn <- snapshot3d(filename = outfile, width=800, height = 800)
knitr::include_graphics(outfile)
```

:::


::: {.content-visible when-format="html"}

HTML: Will this generate a dynamic plot @fig-rgl-test-html?

```{r}
#| label: fig-rgl-test-html
#| fig-width: 8
#| fig-height: 8
#| fig-cap: "Random points in 3D"
x <- rnorm(100)
y <- rnorm(100)
z <- rnorm(100)
plot3d(x, y, z, col = "blue", type = "s", size = 3)
rglwidget(width = 500, height = 500) |>
  playwidget()
```

:::

